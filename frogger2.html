<html>
  <head>
    <title>frogger2</title>
  </head>
  <body>

    <canvas id='myCanvas'width = '400' height = '520' ></canvas>

    <script>
    var canvas = document.getElementById('myCanvas');
    var ctx = canvas.getContext('2d');
    var gridSize = (canvas.width/10);
    var truckX = [0, 240];
    var keyInput = true;

    document.addEventListener('keydown', function(e){

          var thingFromEventObject = e.keyCode;
          console.log(thingFromEventObject);
        	if((thingFromEventObject == 40 || thingFromEventObject == 38) && keyInput){
            Frog.jump(thingFromEventObject);
            keyInput = false;
            setTimeout(function(){ keyInput = true; },500);
          }
          else{
            if(!(thingFromEventObject == 40 || thingFromEventObject == 38))
            Frog.jump(thingFromEventObject);
          }
    });
    var vehicles = [];//initialize vehicles
    //colour, xVal, yVal, speed, vLength, direction
    for(var x = 0; x < 3; x++){//f
      vehicles[x] = new Vehicle('red',(canvas.width/3*x-gridSize + gridSize * x /3), (canvas.height/2) + gridSize , 1, gridSize, 'right');
    }
  //  vehicles[0] = new Vehicle('red', 0, 300, 1, 40, 'right');

    var Frog = {
      frogX: canvas.width/2 - gridSize/2,//frog will be in middle of grid block
      frogY: canvas.height - gridSize/2,
      jump : function(direction){//up down left right with arrow keys
          if(direction == 40){
            this.frogY += gridSize;
          }else if(direction == 38){
            this.frogY -= gridSize;
          }else if(direction == 37){
            this.frogX -= gridSize;
          }else if(direction == 39){
            this.frogX += gridSize;
          }

          if(this.frogY > canvas.height - gridSize/2){
            this.frogY = canvas.height - gridSize/2;
          }
          else if(this.frogY < gridSize/2){
            this.frogY = gridSize/2;
          }
          if(this.frogX > canvas.width - gridSize/2){
            this.frogX = canvas.width - gridSize/2;
          }else if(this.frogX < gridSize/2){
            this.frogX = gridSize/2;
          }

      },

      draw: function(){//eventually place image instead of square
        ctx.fillStyle = 'green';
        ctx.fillRect(this.frogX, this.frogY, 10, 10);
      },
    }


    function drawLog(){

    }

    function Vehicle(color, xVal, yVal, speed, vLength, direction){
        this.color = color,
        this.xVal = xVal,
        this.yVal = yVal,
        this.vLength = vLength,
        this.direction = direction,
        this.speed = speed,//slow medium fast

        this.draw = function(){
          ctx.fillStyle = this.color;
          ctx.fillRect(this.xVal, this.yVal, vLength, gridSize/2);
          ctx.fillStyle = 'white';
          ctx.fillRect(this.xVal+5, this.yVal-5, 10, 5);
          ctx.fillRect(this.xVal+5, this.yVal+20, 10, 5);
          ctx.fillRect(this.vLength-15 + this.xVal, this.yVal-5, 10, 5);
          ctx.fillRect(this.vLength-15 + this.xVal, this.yVal+20, 10, 5);

          if(this.direction == 'right'){
            if(this.xVal  >= canvas.width){
              this.xVal = 0-vLength;
            }
            else{
              this.xVal++;
            }
          }else if(this.direction == 'left'){
            if(this.xVal  <= 0-vLength){
              this.xVal = canvas.width;
            }
            else{
              this.xVal--;
            }
          }
        }

    }

    function drawTruck(start){
      ctx.fillStyle = 'red';
      //('red', 0, 240, 1, 40, 'right');
      //color, xVal, yVal, speed, vLength, dir
      if(truckX[0]  >= canvas.width){
        truckX[0] = 0;
      }
      else{
        truckX[0]++;
      }
      ctx.fillRect(truckX[0], start, 40, 20);
      ctx.fillStyle='white';
      ctx.fillRect(truckX[0]+5, start-5, 10, 5);
      ctx.fillRect(truckX[0]+5, start+20, 10, 5);
      ctx.fillRect(truckX[0]+25, start-5, 10, 5);
      ctx.fillRect(truckX[0]+25, start+20, 10, 5);
    }

    function drawTruck2(start){
      ctx.fillStyle = 'green';

      if(truckX[1]  <= 0){
        truckX[1] = canvas.width;
      }
      else{
        truckX[1]--;
      }

      ctx.fillRect(truckX[1], start, 40, 20);
      ctx.fillStyle='white';
      ctx.fillRect(truckX[1]+5, start-5, 10, 5);
      ctx.fillRect(truckX[1]+5, start+20, 10, 5);
      ctx.fillRect(truckX[1]+25, start-5, 10, 5);
      ctx.fillRect(truckX[1]+25, start+20, 10, 5);
    }

    function draw(){
      ctx.fillStyle = 'blue';
      ctx.fillRect(0, 0, canvas.width, canvas.height/2);
      ctx.fillStyle = 'black';
      ctx.fillRect(0, canvas.height/2, canvas.width, canvas.height);
      ctx.fillStyle = 'DarkOrange';
      ctx.fillRect(0, canvas.height-gridSize, canvas.width, gridSize);
      ctx.fillRect(0, canvas.height/2-gridSize/2, canvas.width, gridSize);
      ctx.fillRect(0, 0, canvas.width, gridSize);
      //drawTruck(240);
      //drawTruck2(280);
      for(x in vehicles){
        vehicles[x].draw();
      }
      //vehicles[0].draw();
      //vehicles[1].draw();
      //vehicles[2].draw();
      Frog.draw();
      // if(keyInput == false)
      //   setTimeout(function(){ keyInput = true; },1000);

    }
    setInterval(draw, 15);
    </script>
  </body>
</html>
